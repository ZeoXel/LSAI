# å¯çµè§†é¢‘ç”ŸæˆAPI - ä½¿ç”¨è¯´æ˜

## ğŸ“– æ¦‚è¿°

æœ¬é¡¹ç›®å·²é›†æˆå¯çµAIçš„å®Œæ•´è§†é¢‘ç”ŸæˆåŠŸèƒ½ï¼Œæ”¯æŒæ–‡ç”Ÿè§†é¢‘ã€å›¾ç”Ÿè§†é¢‘ã€å¤šå›¾å‚è€ƒç”Ÿè§†é¢‘ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- âœ… **æ–‡ç”Ÿè§†é¢‘**: é€šè¿‡æ–‡å­—æè¿°ç”Ÿæˆè§†é¢‘
- âœ… **å›¾ç”Ÿè§†é¢‘**: åŸºäºå›¾ç‰‡ç”ŸæˆåŠ¨æ€è§†é¢‘  
- âœ… **å¤šå›¾å‚è€ƒç”Ÿè§†é¢‘**: ä½¿ç”¨å¤šå¼ å›¾ç‰‡ä½œä¸ºå‚è€ƒç”Ÿæˆè§†é¢‘
- âœ… **ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢**: å®æ—¶æŸ¥è¯¢è§†é¢‘ç”ŸæˆçŠ¶æ€
- âœ… **å‚æ•°éªŒè¯**: å®Œæ•´çš„è¾“å…¥å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒé…ç½®

```env
# .env.local
KLING_ACCESS_KEY=your_kling_access_key
KLING_SECRET_KEY=your_kling_secret_key
```

### APIè°ƒç”¨ç¤ºä¾‹

```javascript
// æ–‡ç”Ÿè§†é¢‘
const response = await fetch('/api/video/generate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    prompt: 'ä¸€åªå¯çˆ±çš„å°çŒ«åœ¨é˜³å…‰ä¸‹ç©è€',
            model: 'kling-v1',
            duration: 5,
            mode: 'std',
            aspect_ratio: '16:9'
  })
});

// å›¾ç”Ÿè§†é¢‘
const response = await fetch('/api/video/generate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    prompt: 'è®©å›¾ç‰‡ä¸­çš„åœºæ™¯åŠ¨èµ·æ¥',
            model: 'kling-v1',
    image: 'base64_image_data',
            duration: 5,
            mode: 'std'
  })
});

// å¤šå›¾å‚è€ƒç”Ÿè§†é¢‘
const response = await fetch('/api/video/generate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    prompt: 'åŸºäºè¿™äº›å›¾ç‰‡åˆ›å»ºåŠ¨æ€è§†é¢‘',
    model: 'kling-v1-6',
    image_list: [
            { image: 'base64_image_1' },
      { image: 'base64_image_2' }
    ],
            duration: '5',
    mode: 'std'
  })
});
```

## ğŸ“‹ APIå‚æ•°è¯´æ˜

### é€šç”¨å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| model | string | âœ… | æ¨¡å‹åç§°: `kling-v1`, `kling-v1-6`, `kling-v2-master` |
| prompt | string | âœ… | è§†é¢‘æè¿°æ–‡æœ¬ï¼ˆæœ€é•¿2500å­—ç¬¦ï¼‰ |
| duration | number/string | âŒ | è§†é¢‘æ—¶é•¿: 5, 10ï¼ˆç§’ï¼‰ |
| mode | string | âŒ | ç”Ÿæˆæ¨¡å¼: `std`ï¼ˆæ ‡å‡†ï¼‰, `pro`ï¼ˆä¸“å®¶ï¼‰ |
| aspect_ratio | string | âŒ | å®½é«˜æ¯”: `16:9`, `9:16`, `1:1` |

### å›¾ç”Ÿè§†é¢‘ä¸“ç”¨å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| image | string | âœ… | Base64æ ¼å¼å›¾ç‰‡æ•°æ® |

### å¤šå›¾å‚è€ƒä¸“ç”¨å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| image_list | array | âœ… | å›¾ç‰‡æ•°ç»„ï¼Œæœ€å¤š4å¼  |

## ğŸ”§ æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æ–‡ç”Ÿè§†é¢‘ | å›¾ç”Ÿè§†é¢‘ | å¤šå›¾å‚è€ƒ | æ¨¡å¼æ”¯æŒ |
|------|----------|----------|----------|----------|
| `kling-v1` | âœ… | âœ… | âŒ | std, pro |
| `kling-v1-6` | âœ… (ä»…std) | âœ… | âœ… | std, pro |
| `kling-v2-master` | âœ… | âœ… | âŒ | æ— æ¨¡å¼é€‰æ‹© |
| `kling-v2-1-master` | âœ… | âœ… | âŒ | æ— æ¨¡å¼é€‰æ‹© |

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**: è¯·ç¡®ä¿APIå¯†é’¥å®‰å…¨ï¼Œé…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­
2. **å›¾ç‰‡æ ¼å¼**: æ”¯æŒjpg/jpeg/pngï¼Œå¤§å°<10MBï¼Œå°ºå¯¸>200px
3. **å‚æ•°é™åˆ¶**: 
   - æç¤ºè¯æœ€é•¿2500å­—ç¬¦
   - å¤šå›¾å‚è€ƒæœ€å¤š4å¼ å›¾ç‰‡
   - å®½é«˜æ¯”èŒƒå›´1:2.5~2.5:1
4. **ä»»åŠ¡çŠ¶æ€**: è§†é¢‘ç”Ÿæˆæ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œé€šå¸¸éœ€è¦60-180ç§’
5. **æ¨¡å‹é™åˆ¶**: ä¸åŒæ¨¡å‹æ”¯æŒçš„åŠŸèƒ½å’Œå‚æ•°ä¸åŒ

## ğŸ” é”™è¯¯å¤„ç†

å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š

- **APIå¯†é’¥æ— æ•ˆ**: æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- **è¯·æ±‚å‚æ•°é”™è¯¯**: éªŒè¯è¾“å…¥å‚æ•°æ ¼å¼å’ŒèŒƒå›´
- **å›¾ç‰‡æ ¼å¼ä¸æ”¯æŒ**: ç¡®ä¿å›¾ç‰‡ä¸ºjpg/jpeg/pngæ ¼å¼
- **ä»»åŠ¡åˆ›å»ºå¤±è´¥**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIé…é¢

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `src/lib/kling-api.ts` - APIå®¢æˆ·ç«¯å®ç°
- `src/app/api/video/generate/route.ts` - APIè·¯ç”±å¤„ç†
- `src/components/video/VideoGenerator.tsx` - å‰ç«¯ç»„ä»¶

---

ğŸ’¡ **æç¤º**: æŸ¥çœ‹é¡¹ç›®æºç äº†è§£å®Œæ•´çš„å®ç°ç»†èŠ‚ï¼ 